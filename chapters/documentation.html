

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Documentation &mdash; How to make a python package 0.0.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="matpy API" href="API.html" />
    <link rel="prev" title="Logging" href="logging.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> How to make a python package
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="unittesting.html">Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-setup-rambling">Pre-Setup-Rambling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-sphinx">Setting up Sphinx</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conf-py"><code class="docutils literal notranslate"><span class="pre">conf.py</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-rst"><code class="docutils literal notranslate"><span class="pre">index.rst</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offline-docs">Offline Docs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#publishing-your-documentation-online-2-ways">Publishing your documentation online: 2 ways</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gh-pages"><cite>gh-pages</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-branch">Create branch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete-previous-build">Delete previous build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-necessary-files-from-master-branch">Get necessary files from <cite>master</cite> <cite>branch</cite></a></li>
<li class="toctree-l4"><a class="reference internal" href="#compile-the-documentation">Compile the documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#move-files-into-html-from-build-folder-to-main-repo">Move files into <cite>html</cite> from <cite>build</cite> folder to main repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remove-files-unnecessary-fro-the-website">Remove files unnecessary fro the website</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stage-the-changes">Stage the changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commit-push-branch-to-github-repo">Commit &amp; push branch to github repo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#readthedocs">ReadTheDocs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="API.html"><code class="docutils literal notranslate"><span class="pre">matpy</span></code> API</a></li>
<li class="toctree-l1"><a class="reference internal" href="pypi.html">Distributing your package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">How to make a python package</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/chapters/documentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h1>
<p>Everyone should want their code documented. The simple reason for that is
that nobody will be able to use your code if there is no documentation. So,
let’s get started.</p>
<div class="section" id="pre-setup-rambling">
<h2>Pre-Setup-Rambling<a class="headerlink" href="#pre-setup-rambling" title="Permalink to this headline">¶</a></h2>
<p>First of all, all documentation for Python code is written in
ReStructuredText, short: <code class="docutils literal notranslate"><span class="pre">RST</span></code>. It is extremely similar to Markdown, but it
has a few advantages when it comes to writing longer documentation. For example,
if you want to write so much documentation that it’s easier to split
things up into chapters, you can simply include chapter files into a main file
(much like in LateX), which is not possible using Markdown. But this is just
one of the perks. When you start working with sphinx, you will start noticing
the subtle and obvious differences between <code class="docutils literal notranslate"><span class="pre">RST</span></code> and <code class="docutils literal notranslate"><span class="pre">Markdown</span></code>.</p>
</div>
<div class="section" id="setting-up-sphinx">
<h2>Setting up Sphinx<a class="headerlink" href="#setting-up-sphinx" title="Permalink to this headline">¶</a></h2>
<p>Let’s say you have created your <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">environment</span></code> using the
<code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> that was provided with the sample package.
If you are working on your own package, make sure that you have
both <cite>sphinx</cite> installed and the <cite>sphinx-rtd-theme</cite>. If not,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install sphinx sphinx-rtd-theme
</pre></div>
</div>
<p>Now you’re all set to start compiling some documentation!
First, let’s create a directory for the docs and all things related</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Provided you are in your package repo</span>
$ mkdir docs <span class="o">&amp;&amp;</span> <span class="nb">cd</span> docs
</pre></div>
</div>
<p>Then,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sphinx-quickstart
</pre></div>
</div>
<p>will guide you through the initialization process of creating sphinx structure.</p>
<p>As you may have noticed a bunch of files were generated in the docs directory.
The most important ones are: <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">index.rst</span></code>. The latter can be
thought of as <code class="docutils literal notranslate"><span class="pre">main.tex</span></code> for LateX documents. The former is a configuration
file that defines any modifications for the way the documents are created.</p>
<div class="section" id="conf-py">
<h3><code class="docutils literal notranslate"><span class="pre">conf.py</span></code><a class="headerlink" href="#conf-py" title="Permalink to this headline">¶</a></h3>
<p>To be able to actually document the code and make the final html look nice, a
few lines in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> have to changed. The lines that are changed are
shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>

<span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinx.ext.autodoc&#39;</span><span class="p">,</span>
              <span class="s1">&#39;sphinx.ext.viewcode&#39;</span><span class="p">,</span>
<span class="o">...</span>
<span class="n">autoclass_content</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span>
<span class="o">...</span>

<span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;sphinx_rtd_theme&#39;</span>

<span class="o">...</span>
</pre></div>
</div>
<p>The extensions enable the possibility on auto documenting your code, meaning
the docstrings of your functions and classes are gonna be read and added when
the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">auto-module</span></code> directive is called. <code class="docutils literal notranslate"><span class="pre">autoclass_content</span> <span class="pre">=</span> <span class="pre">'both'</span></code>
makes sure that when a class is documented in your code the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> part
will be documented as well. If you are writing your docstrings in a language other
than <cite>sphinx</cite> (e.g. <cite>Numpy</cite>, which looks nicer (less dense) in your script)
adding <code class="docutils literal notranslate"><span class="pre">sphinx.ext.napoleon</span></code> to extensions, will auto-translate
those docstrings. Finally, the <code class="docutils literal notranslate"><span class="pre">sphinx_rtd_theme</span></code> is simply nice
to look at. There are other themes out there. But I just like this one.</p>
</div>
<div class="section" id="index-rst">
<h3><code class="docutils literal notranslate"><span class="pre">index.rst</span></code><a class="headerlink" href="#index-rst" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">contents.rst</span></code> is used to control the content in your documentation.
Usually this is done by the so-called <code class="docutils literal notranslate"><span class="pre">toctree</span></code> directive (table of
contents tree), which allows us to include files so that not the complete
documentation has to be written in one file. A standard file (the one of this
documentation) looks as follows:</p>
<div class="highlight-rst notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gh">How to make a python package</span>
<span class="gh">============================</span>

This is hopefully helpful, to someone, somewhere who struggled with the same
stuff that I struggled with...

The whole documentation is referring to the following Github repository:
<span class="s">`how_to_make_a_python_package </span><span class="si">&lt;https://github.com/lsawade/how_to_make_a_python_package&gt;</span><span class="s">`_</span>

<span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:maxdepth:</span> 2
   <span class="nc">:caption:</span> Contents:

   chapters/introduction
   chapters/installation
   chapters/unittesting
   chapters/logging
   chapters/documentation
   chapters/API
   chapters/pypi



<span class="gh">Indices and tables</span>
<span class="gh">==================</span>

<span class="m">*</span> <span class="na">:ref:</span><span class="nv">`genindex`</span>
<span class="m">*</span> <span class="na">:ref:</span><span class="nv">`modindex`</span>
<span class="m">*</span> <span class="na">:ref:</span><span class="nv">`search`</span>
</pre></div>
</td></tr></table></div>
<p>This way, we can write a very user-friendly structured documentation.</p>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>There’s one step involved in making the documentation “automatic”. We need
some file to actually call in the “docstrings” from the package files. The
usual way of doing this is to have a function library at the end of your
documentation. Here, it is also the last section: <a class="reference internal" href="API.html#api-label"><span class="std std-ref">matpy API</span></a>. The
source file is very simple:</p>
<div class="highlight-rst notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_api-label:</span>

<span class="gh">``matpy`` API</span>
<span class="gh">-------------</span>

<span class="gh">Matrix multiplication</span>
<span class="gh">+++++++++++++++++++++</span>

<span class="p">..</span> <span class="ow">automodule</span><span class="p">::</span> matpy.matrixmultiplication
    <span class="nc">:members:</span>
    <span class="nc">:show-inheritance:</span>

<span class="gh">Logging Utility</span>
<span class="gh">+++++++++++++++++++++</span>

<span class="p">..</span> <span class="ow">automodule</span><span class="p">::</span> matpy.log_util
    <span class="nc">:members:</span>
    <span class="nc">:show-inheritance:</span>

<span class="gh">Testing</span>
<span class="gh">+++++++</span>

<span class="gh">Matrix Multiplication</span>
<span class="gh">=====================</span>

<span class="p">..</span> <span class="ow">automodule</span><span class="p">::</span> tests.test_matmul_and_dot
    <span class="nc">:members:</span>
    <span class="nc">:show-inheritance:</span>
</pre></div>
</td></tr></table></div>
<p>As you can see, we have exactly one <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">automodule::</span></code> per python module
(file). The cool thing about this is that we don’t have to
change the actual reference to the function or even write manual
documentation on the side. When the functions in the package are updated, so
will the documentation.</p>
</div>
<div class="section" id="offline-docs">
<h3>Offline Docs<a class="headerlink" href="#offline-docs" title="Permalink to this headline">¶</a></h3>
<p>To create either the <code class="docutils literal notranslate"><span class="pre">pdf</span></code> or the <code class="docutils literal notranslate"><span class="pre">html</span></code> files, simply cd into the
<code class="docutils literal notranslate"><span class="pre">docs</span></code> directory and</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># For PDF</span>
make pdf

<span class="c1"># For HTML</span>
make html
</pre></div>
</div>
<p>The built files can then be found in <code class="docutils literal notranslate"><span class="pre">docs/build/pdf</span></code> or <code class="docutils literal notranslate"><span class="pre">docs/build/html</span></code>.
The pdf, I assume, you can find yourself, but if you want to open the <code class="docutils literal notranslate"><span class="pre">html</span></code>
it’s the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> file you want to open. It brings you directly to
offline webpage when opened.</p>
</div>
</div>
<div class="section" id="publishing-your-documentation-online-2-ways">
<h2>Publishing your documentation online: 2 ways<a class="headerlink" href="#publishing-your-documentation-online-2-ways" title="Permalink to this headline">¶</a></h2>
<p>There are two ways you can publish your documentation online. You could either
publish it through an external service such as <cite>ReadTheDocs</cite>, or, my now
preferred way, through <cite>github-pages</cite>, directly from your github repo from a
separate branch.
The branch style setup is slightly more difficult, but I would definitely
recommend it since you are not dependent on third-party services
(except <cite>github</cite>).
Both ways are explained below and work equally well.
Since I prefer the <cite>github-pages</cite>, let’s start with that one.</p>
<div class="section" id="gh-pages">
<h3><cite>gh-pages</cite><a class="headerlink" href="#gh-pages" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before we get started, this option is only really possible if you choose
to make your Github repo public. If it is not public, github refuses to host
online documenation (which makes sense). You can follow these instructions
either way. The disadvantage is that you won’t be able to access the
online documenation (that is also the case for the <cite>ReadTheDocs</cite> documentation
if you don’t have a <cite>pro</cite> account).
The advantage is that once you have set this up and decide to make you
repository public, it takes seconds to host your
up-to-date documentation (almost by yourself!).</p>
</div>
<p>After having set up the documentation locally, you can host it in a very
simple, yet a bit tricky way on github pages if you setup your <cite>Makefile</cite>
correctly. Through in the <cite>sphinx</cite> setup already created a Makefile to create
documentation. Now we create our own <cite>Makefile</cite> in the repodirectory that
imitates the one generated by <cite>sphinx</cite>, so that you can run <cite>make html/pdf</cite>
right from the main repo. For continuity however we keep the <cite>sphinx</cite> in
the docs folder, so that we have a way to go <cite>back in time</cite>.
To publish the webpage, create a <cite>Makefile</cite> that looks like the sphinx one in
the main repository directory with the difference that we change the actual
location of the source and destination to <cite>docs/{src, build}</cite>, respectively,
and we add a new <cite>target</cite> to our <cite>Makefile</cite>, called <cite>gh-pages</cite>.</p>
<div class="highlight-make notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c"># Minimal makefile for Sphinx documentation</span>
<span class="c">#</span>

<span class="c"># You can set these variables from the command line, and also</span>
<span class="c"># from the environment for the first two.</span>
<span class="nv">SPHINXOPTS</span>    <span class="o">?=</span>
<span class="nv">SPHINXBUILD</span>   <span class="o">?=</span> sphinx-build
<span class="nv">SOURCEDIR</span>     <span class="o">=</span> docs/source
<span class="nv">BUILDDIR</span>      <span class="o">=</span> docs/build
<span class="nv">GH_PAGES_SOURCES</span> <span class="o">=</span> docs src/matpy tests setup.py setup.cfg .readthedocs.yml environment.yml Makefile

<span class="c"># Put it first so that &quot;make&quot; without argument is like &quot;make help&quot;.</span>
<span class="nf">help</span><span class="o">:</span>
	@<span class="k">$(</span>SPHINXBUILD<span class="k">)</span> -M <span class="nb">help</span> <span class="s2">&quot;</span><span class="k">$(</span>SOURCEDIR<span class="k">)</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="k">$(</span>BUILDDIR<span class="k">)</span><span class="s2">&quot;</span> <span class="k">$(</span>SPHINXOPTS<span class="k">)</span> <span class="k">$(</span>O<span class="k">)</span>

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">help</span> <span class="n">Makefile</span>

<span class="c"># Catch-all target: route all unknown targets to Sphinx using the new</span>
<span class="c"># &quot;make mode&quot; option.  $(O) is meant as a shortcut for $(SPHINXOPTS).</span>
<span class="nf">%</span><span class="o">:</span> <span class="n">Makefile</span>
	@<span class="k">$(</span>SPHINXBUILD<span class="k">)</span> -M <span class="nv">$@</span> <span class="s2">&quot;</span><span class="k">$(</span>SOURCEDIR<span class="k">)</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="k">$(</span>BUILDDIR<span class="k">)</span><span class="s2">&quot;</span> <span class="k">$(</span>SPHINXOPTS<span class="k">)</span> <span class="k">$(</span>O<span class="k">)</span>

<span class="nf">gh-pages</span><span class="o">:</span>
	git checkout gh-pages
	rm -rf build _sources _static _modules chapters
	git checkout master <span class="k">$(</span>GH_PAGES_SOURCES<span class="k">)</span> .gitignore
	git reset HEAD
	make html
	mv -fv docs/build/html/* ./
	rm -rf <span class="k">$(</span>GH_PAGES_SOURCES<span class="k">)</span> build
	git add -A
	git commit -a -v -m <span class="s2">&quot;Generated gh-pages for `git log master -1 --pretty=short --abbrev-commit`&quot;</span> <span class="o">&amp;&amp;</span> git push origin gh-pages <span class="p">;</span> git checkout master

<span class="nf">dist</span><span class="o">:</span>
	python3 -m pip install --user --upgrade setuptools wheel
	python3 setup.py sdist bdist_wheel
	python3 -m twine upload dist/*
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Disregard the last <cite>target</cite> in the <cite>Makefile</cite> for now.</p>
</div>
<p>The very first time we need to create a branch called <cite>gh-pages</cite>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create branch</span>
git branch gh-pages
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not switch to the branch! One user has reported that
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">&lt;branch&gt;</span></code> showed unexpected behaviour by switching to the
branch. Check whether you are on the <cite>master</cite> branch using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git branch
</pre></div>
</div>
<p>The branch with the star is the current branch. If it is not on the
<code class="docutils literal notranslate"><span class="pre">master</span></code> <code class="docutils literal notranslate"><span class="pre">branch</span></code>, switch to the <code class="docutils literal notranslate"><span class="pre">master</span></code> <code class="docutils literal notranslate"><span class="pre">branch</span></code> using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout master
</pre></div>
</div>
</div>
<p>This creates your documentation branch in your local git repo. Afterwards we can
call</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create extra branch and clear unnecessary files afterwards</span>
make gh-pages
</pre></div>
</div>
<p>To automatically checkout out all necessary files, compile the html data,
delete unnecessary data, and finally push the branch to the online <cite>gh-pages</cite>
branch.</p>
<p>To be clear what’s happening, let’s go through the <cite>Makefile</cite> <cite>target</cite>
<cite>gh-pages</cite> line by line.</p>
<div class="section" id="create-branch">
<h4>Create branch<a class="headerlink" href="#create-branch" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout gh-pages
</pre></div>
</div>
</div>
<div class="section" id="delete-previous-build">
<h4>Delete previous build<a class="headerlink" href="#delete-previous-build" title="Permalink to this headline">¶</a></h4>
<p>This step is redundant for building the first time, so it is skipped.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf build _sources _static _modules chapters
</pre></div>
</div>
</div>
<div class="section" id="get-necessary-files-from-master-branch">
<h4>Get necessary files from <cite>master</cite> <cite>branch</cite><a class="headerlink" href="#get-necessary-files-from-master-branch" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout master <span class="k">$(</span>GH_PAGES_SOURCES<span class="k">)</span> .gitignore
</pre></div>
</div>
<p>This line gets all the necessary files listed in the <code class="docutils literal notranslate"><span class="pre">GH_PAGES_SOURCES</span></code>
variable declaration at the top of the file to create your documentaion;
i.e. the documentation folder, the package filed the test folder, and other
files which are presented in the documentation later on.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">GH_PAGES_SOURCES</span></code> is declared at the top of the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>. You should
really take a look at this line and modify it to check which files and
folder are required for your documentation. E.g., the <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> we
include here is only there, so that we can include it literally in the
documentaion. For your package, this file is not needed probably, unless
you want to show it in the documentation. The same goes for
<code class="docutils literal notranslate"><span class="pre">tests</span></code>, <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>, <code class="docutils literal notranslate"><span class="pre">.readthedocs.yml</span></code>,
<code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>. All these files we include here, just so that we can
show them in the documenation.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Double-check your source and build directory location and if they match
with your sphinx setup:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nv">SOURCEDIR</span>     <span class="o">=</span> docs/source
<span class="nv">BUILDDIR</span>      <span class="o">=</span> docs/build
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> is outside the <code class="docutils literal notranslate"><span class="pre">GH_PAGES_SOURCES</span></code>. We do not
want to delete the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> before we stage and commit our changes
later on, but all of <code class="docutils literal notranslate"><span class="pre">GH_PAGES_SOURCES</span></code> is deleted. Hence, we check it out
separately.</p>
</div>
</div>
<div class="section" id="compile-the-documentation">
<h4>Compile the documentation<a class="headerlink" href="#compile-the-documentation" title="Permalink to this headline">¶</a></h4>
<p>Just like you did locally, compile the documenation with the following line</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make html
</pre></div>
</div>
</div>
<div class="section" id="move-files-into-html-from-build-folder-to-main-repo">
<h4>Move files into <cite>html</cite> from <cite>build</cite> folder to main repo<a class="headerlink" href="#move-files-into-html-from-build-folder-to-main-repo" title="Permalink to this headline">¶</a></h4>
<p>This step ensures that <cite>github-pages</cite> can read your files</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mv -fv docs/build/html/* ./
</pre></div>
</div>
</div>
<div class="section" id="remove-files-unnecessary-fro-the-website">
<h4>Remove files unnecessary fro the website<a class="headerlink" href="#remove-files-unnecessary-fro-the-website" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf <span class="k">$(</span>GH_PAGES_SOURCES<span class="k">)</span> build
</pre></div>
</div>
</div>
<div class="section" id="stage-the-changes">
<h4>Stage the changes<a class="headerlink" href="#stage-the-changes" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git add -A
</pre></div>
</div>
</div>
<div class="section" id="commit-push-branch-to-github-repo">
<h4>Commit &amp; push branch to github repo<a class="headerlink" href="#commit-push-branch-to-github-repo" title="Permalink to this headline">¶</a></h4>
<p>This is a pretty long one-liner, but to split it up by the <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>, it first
commits the changes with a message to the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> <code class="docutils literal notranslate"><span class="pre">branch</span></code>. Second,
it pushes the changes to the online repo <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch. Finally,
we switch back to the master branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git ci -m <span class="s2">&quot;Generated gh-pages for `git log master -1 --pretty=short --abbrev-commit`&quot;</span> <span class="o">&amp;&amp;</span> git push origin gh-pages <span class="p">;</span> git checkout master
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Recently, Github-Pages changed their default format to Jekyll. For Python
documentation, however, we compile static html pages. In other words, we
have to tell Github to not use Jekyll by creating a <code class="docutils literal notranslate"><span class="pre">.nojekyll</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout gh-pages
touch .nojekyll
git add .nojekyll
git commit -im <span class="s1">&#39;Added nojekyll file&#39;</span>
git push origin gh-pages
git checkout master
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="readthedocs">
<h3>ReadTheDocs<a class="headerlink" href="#readthedocs" title="Permalink to this headline">¶</a></h3>
<p>What’s nice about Python, Sphinx, and ReStructuredText that with a few simple
tricks your documentation is online. The key ingredient to make that happen
is the <code class="docutils literal notranslate"><span class="pre">.readthedocs.yml</span></code> file. This file tells the server what is
necessary to build your documentation and how to build it. Let’s take a look.</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># .readthedocs.yml</span>
<span class="c1"># Read the Docs configuration file</span>
<span class="c1"># See https://docs.readthedocs.io/en/stable/config-file/v2.html for details</span>

<span class="c1"># Build image</span>
<span class="nt">build</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">latest</span>

<span class="c1"># Required</span>
<span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="c1"># Build documentation in the docs/ directory with Sphinx</span>
<span class="nt">sphinx</span><span class="p">:</span>
    <span class="nt">configuration</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">docs/source/conf.py</span>

<span class="c1"># Optionally build your docs in additional formats such as PDF and ePub</span>
<span class="nt">formats</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">pdf</span><span class="p p-Indicator">]</span>

<span class="c1"># Setting up the conda environment</span>
<span class="nt">conda</span><span class="p">:</span>
  <span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">environment.yml</span>

<span class="c1"># Optionally set the version of Python and requirements required to build your docs</span>
<span class="nt">python</span><span class="p">:</span>
   <span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.7</span>
   <span class="nt">install</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pip</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
   <span class="nt">system_packages</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</td></tr></table></div>
<p>There are a few important steps here. The first entry in this file that needs
to be manually set is the <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> keyword. The location of the conf.py
needs to be set in relation to the repository. The second one is the <code class="docutils literal notranslate"><span class="pre">formats</span></code>
keyword, which if you want <code class="docutils literal notranslate"><span class="pre">htmlzip</span></code>, <code class="docutils literal notranslate"><span class="pre">PDF</span></code> and <code class="docutils literal notranslate"><span class="pre">EPub</span></code> built and
donwloadable from the page, is simply ‘all’. Otherwise specify.
Much like for the installation and the unit testing we also need to specify the
<code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> with the keywords <code class="docutils literal notranslate"><span class="pre">conda</span></code> and <code class="docutils literal notranslate"><span class="pre">environment</span></code>. Last but
not least, we have to define Python version and method of installation. In
this case, we’ll let <code class="docutils literal notranslate"><span class="pre">pip</span></code> do the job.</p>
<p>Having this things set, head over to <a class="reference external" href="https://readthedocs.org/">ReadTheDocs</a>
and log in. If you do not have an account there, I would suggest logging in
using your Github account. Then import the github repository. That should be
it since the <code class="docutils literal notranslate"><span class="pre">.readthedocs.yml</span></code> does all the configuring. Usually it takes
a bit until the build is done, but eventually you can click on the <code class="docutils literal notranslate"><span class="pre">View</span>
<span class="pre">Docs</span></code> button and your good to go.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="API.html" class="btn btn-neutral float-right" title="matpy API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="logging.html" class="btn btn-neutral float-left" title="Logging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, htmapp development team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>